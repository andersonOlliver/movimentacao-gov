<!DOCTYPE html>
<ui:composition template="/WEB-INF/template/Layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <f:metadata>
        <f:viewAction action="#{cadastroClienteBean.prepararCadastro}" />
    </f:metadata>

    <ui:define name="titulo">Cadastro de Clientes</ui:define>

    <ui:define name="corpo">

        <h1>Cadastro de Clientes</h1>

        <h:form id="frm">
            <p:messages showDetail="false" showSummary="true" autoUpdate="true" />

            <!--TODOS OS CODIGOS AQUI!-->

            <p:panelGrid columns="2" id="grid" styleClass="grid ">

                <p:outputLabel value="Nome" for="cliente_nome" />
                <p:inputText id="cliente_nome" required="true" maxlength="200"
                             value="#{cadastroClienteBean.cliente.nome}">
                </p:inputText>

                <p:outputLabel value="MCI" for="cliente_mci" />
                <p:inputText id="cliente_mci" required="true" maxlength="9"
                             value="#{cadastroClienteBean.cliente.mci}">
                    <p:keyFilter mask="num" />
                </p:inputText>

                <p:outputLabel value="Carteira" for="cliente_carteira" />
                <p:inputText id="cliente_carteira" maxlength="4"
                             value="#{cadastroClienteBean.cliente.carteira}">
                    <p:keyFilter mask="num" />
                </p:inputText>

                <p:outputLabel value="Agencia" for="cliente_agencia" />
                <p:selectOneMenu id="cliente_agencia" required="true"
                                 value="#{cadastroClienteBean.cliente.agencia}" 
                                 filter="true"
                                 converter="omnifaces.SelectItemsConverter">
                    <f:selectItem itemLabel="Selecione a AgÃªncia"
                                  noSelectionOption="true" />
                    <f:selectItems value="#{cadastroClienteBean.agencias}"
                                   var="item" itemValue="#{item}" itemLabel="#{item.nome}" />
                </p:selectOneMenu>

                <h:outputLabel />
                <p:commandButton value="Salvar" action="#{cadastroClienteBean.salvar}"
                                 icon="ui-icon-disk" update="@form" />

            </p:panelGrid>


        </h:form>
    </ui:define>
</ui:composition>